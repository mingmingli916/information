
\chapter{Records}
\label{cha:records}

The purpose of records is to allow programmers to create objects with new types that are not built into Emacs.
They are used as the underlying representation of \funcword{cl-defstruct} and \funcword{defclass} instances.


Internally, a record object is much like a vector; its slots can be accessed using \funcword{aref} and it can be copied using \funcword{copy-sequence}.
However, the first slot is used to hold its type as returned by \funcword{type-of}.


The type slot should be a symbol or a type descriptor.
If itâ€™s a type descriptor, the symbol naming its type will be returned.
Any other kind of object is returned as-is.

The printed representation of records is \argument{\#s} followed by a list specifying the contents.
The first list element must be the record type.
The following elements are the record slots.

A record is considered a constant for evaluation: the result of evaluating it is the same record.
This does not evaluate or even examine the slots.


\begin{itemize}
\item \lstinline|(recordp object)|
\item \lstinline|(record type &rest objects)|\\
  This function creates and returns a record whose type is \argument{type} and remaining slots are the rest of the arguments, \argument{objects}.
\begin{lstlisting}
(record 'foo 23 [bar baz] "rats")
;; #s(foo 23 [bar baz] "rats")
\end{lstlisting}
\item \lstinline|(make-record type length object)|\\
  This function returns a new record with type \argument{type} and \argument{length} more slots, each initialized to \argument{object}.
\begin{lstlisting}
(setq sleepy (make-record 'foo 9 'Z))
;; #s(foo Z Z Z Z Z Z Z Z Z)
\end{lstlisting}
\end{itemize}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "elisp"
%%% End:
